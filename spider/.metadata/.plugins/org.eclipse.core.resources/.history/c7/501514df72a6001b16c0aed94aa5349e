package test;
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;

public class Test {
	static String cmd1 = "E:\\学习\\团队项目开发\\workspace\\test\\爬虫.exe";
    static String code = "SH600415";
    static int spiderFlag = -1;//0：失败 1：成功
	public static void main(String[] args) throws IOException, InterruptedException {
		//System.out.println(System.getProperty("user.dir"));//user.dir指定了当前的路径
	    String[] command = new String[]{cmd1,code};
	    BufferedReader br = null;
	    BufferedReader brError = null;
	    /*
	    try {
	    		Process p = Runtime.getRuntime().exec(command);
	            String line = null;
	            br = new BufferedReader(new InputStreamReader(p.getInputStream()));
	            brError = new BufferedReader(new InputStreamReader(p.getErrorStream()));
	            while ((line = br.readLine()) != null  || (line = brError.readLine()) != null) {
	                System.out.println(line);
	            }
	        } catch (Exception e) {
	            e.printStackTrace();
	        } finally {
	            if (br != null) {
	                try {
	                    br.close();
	                } catch (Exception e) {
	                    e.printStackTrace();
	                }
	            }
	        }
		*/
	    System.out.println("开始爬取");
	    try {
	    	Process p = Runtime.getRuntime().exec(command);
            //String line = null;
            br = new BufferedReader(new InputStreamReader(p.getInputStream()));
            brError = new BufferedReader(new InputStreamReader(p.getErrorStream()));
            while ((line = br.readLine()) != null  || (line = brError.readLine()) != null) {
                //System.out.println(line);
            }
	    }catch(Exception e){
	    	spiderFlag=0;
	    	System.out.println("爬取失败");
	    	e.printStackTrace();
	    }finally {
	    	spiderFlag=1;
	    	System.out.println("爬取完成");
	    	if (br != null) {
                try {
                    br.close();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
	    }
	    
	    
	    }	
}
